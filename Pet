import re
from datetime import datetime
import types
import telebot
import time
import random
from telebot import types
import threading
coudown = 0 #–∫–¥ —Å–Ω–∞, –≤–ª–∏—è–µ—Ç –Ω–∞ –≤—Å–µ
happyn = 0 #—Å—á–µ—Ç—á–∏–∫ –ø–æ–≥–ª–∞–∂–∏–≤–∞–Ω–∏–π
voda = 100 #–∂–∞–∂–¥–∞
eda = 100 #—Å—ã—Ç–æ—Å—Ç—å
power = 100 #—Å–∏–ª–∞, —Ç—Ä–∞—Ç–∏—Ç—Å—è –Ω–∞ –∏–≥—Ä—ã, –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –¥–æ 100 –≤–æ –≤—Ä–µ–º—è —Å–Ω–∞
coudownvoda = 0 #–∫–¥ –¥–æ –ø–∏—Ç—å—è
coudowneda = 0 #–∫–¥ –¥–æ –ø—Ä–∏—ë–º–∞ –ø–∏—â–∏
happy = 100 #—Å—á–∞—Å—Ç—å–µ
lock = threading.Lock()



Bot = telebot.TeleBot('7694811675:AAGY6zPIbmyaRn2kKndq8bTNZ-7owuLrf4s')
keyboard = telebot.types.ReplyKeyboardMarkup(resize_keyboard=True)
button31 = telebot.types.KeyboardButton(text='–∏–≥—Ä—ã —Å –∫—É–±–∏–∫–æ–º')
keyboard.add(button31)
button32 = telebot.types.KeyboardButton(text='–ø–æ–∫–æ—Ä–º–∏—Ç—å')
keyboard.add(button32)
button33 = telebot.types.KeyboardButton(text='–Ω–∞–ø–æ–∏—Ç—å')
keyboard.add(button33)
button33 = telebot.types.KeyboardButton(text='–ø–æ–≥–ª–∞–¥–∏—Ç—å')
keyboard.add(button33)
button35 = telebot.types.KeyboardButton(text='—É–ª–æ–∂–∏—Ç—å —Å–ø–∞—Ç—å')
keyboard.add(button35)
button135 = telebot.types.KeyboardButton(text='—Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞')
keyboard.add(button135)
button1235 = telebot.types.KeyboardButton(text='—Å–º–µ–Ω–∏—Ç—å –∏–º—è')
keyboard.add(button1235)
button12325 = telebot.types.KeyboardButton(text='–ø–æ–∏–≥—Ä–∞—Ç—å')
keyboard.add(button12325)
users = set()

@Bot.message_handler(commands = ['start'])
def send_welcome(message):
    users.add(message.chat.id)
    Bot.send_message(message.chat.id, '–ü—Ä–∏–≤–µ—Ç, —è —Ç–≤–æ–π –ø–∏—Ç–æ–º–µ—Ü!–ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, —Å–µ–π—á–∞—Å —É –º–µ–Ω—è –Ω–µ—Ç –∏–º–µ–Ω–∏, –ø—Ä–∏–¥—É–º–∞–π –º–Ω–µ –∏–º—è –∏ –Ω–∞–ø–∏—à–∏!(–ü–æ–¥—Å–∫–∞–∑–∫–∞: –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ –∏–º–µ–Ω–∏ –æ—Ç–ø—Ä–∞–≤—å —Å–ª–µ–¥—É—é—â–∏–º —Å–æ–æ–±—â–µ–Ω–∏–µ —Ç–æ–ª—å–∫–æ –∏–º—è –ø–∏—Ç–æ–º—Ü–∞ –±–µ–∑ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤. –°–º–µ–Ω–∏—Ç—å –∏–º—è –ø–∏—Ç–æ–º—Ü–∞ –º–æ–∂–Ω–æ –±—É–¥–µ—Ç –∫–æ–º–∞–Ω–¥–æ–π *—Å–º–µ–Ω–∏—Ç—å –∏–º—è*.',reply_markup=keyboard)
    listid = list(users)





def coudowntick():
    global coudown

    with lock:
        if coudown > 0:
            coudown = max(0, coudown - 1)

        if coudown > 0:
            timer = threading.Timer(1.0, coudowntick)
            timer.start()
coudowntick()

def coudownedatick():
    global coudowneda


    with lock:
        if coudowneda > 0:
            coudowneda = max(0, coudowneda - 1)

        if coudowneda > 0:
            timer = threading.Timer(1.0, coudownedatick)
            timer.start()
coudownedatick()

def coudownvodatick():
    global coudownvoda
    with lock:
        if coudownvoda > 0:
            coudownvoda = max(0, coudownvoda - 1)

        if coudownvoda > 0:
            timer = threading.Timer(1.0, coudownvodatick)
            timer.start()
coudownvodatick()

def edatick():
    global eda
    if eda <= 20:
        Bot.send_message(listid[0], "–Ø –ø—Ä–æ–≥–æ–ª–æ–¥–∞–ª—Å—è, –ø–æ–∫–æ—Ä–º–∏ –º–µ–Ω—è!")
    with lock:
        if eda > 0:
            eda = max(0, eda - 4)

        if eda > 0:
            timer = threading.Timer(60.0, edatick)
            timer.start()
edatick()

def vodatick():
    global voda
    if voda <= 20:
        Bot.send_message(listid[0], "–Ø —Ö–æ—á—É –ø–∏—Ç—å!")
    with lock:
        if voda > 0:
            voda = max(0, voda - 5)

        if voda > 0:
            timer = threading.Timer(60.0, vodatick)
            timer.start()
vodatick()

def happytick():
    global happy
    if happy <= 20:
        Bot.send_message(listid[0], "–ß—Ç–æ —Ç–æ –º–Ω–µ –≥—Ä—É—Å—Ç–Ω–æ....")

    with lock:
        if happy > 0:
            happy = max(0, happy - 2)

        if happy > 0:
            timer = threading.Timer(60.0, happytick)
            timer.start()
happytick()

def powertick():
    global power

    if power <= 20:
        Bot.send_message(listid[0], "–Ø —É—Å—Ç–∞–ª, —Ö–æ—Ç–µ–ª–æ—Å—å –±—ã –ø–æ—Å–ø–∞—Ç—å....")

    with lock:
        if power > 0:
            power = max(0, power - 1)

        if power > 0:
            timer = threading.Timer(10.0, powertick)
            timer.start()
powertick()





@Bot.message_handler(commands = ['time'])
def date(message):
    Bot.send_message(message.chat.id, '–°–µ–π—á–∞—Å '+str(datetime.today ()))
@Bot.message_handler(commands=['image'])
def image(message):



    Bot.send_photo(message.chat.id, 'https://steamuserimages-a.akamaihd.net/ugc/17550910127524998/543783B601D5A853E3F50907B9722A314DFD92B6/?imw=512&amp;imh=320&amp;ima=fit&amp;impolicy=Letterbox&amp;imcolor=%23000000&amp;letterbox=true', caption='–•)')


namepet = ''

@Bot.message_handler(content_types = ['text'])
def parrot(message):
    global coudown
    global power
    global eda
    global coudowneda
    global coudownvoda
    global happy
    global happyn
    global voda
    global namepet
    text=message.text
    text = text.casefold()
    if namepet == '' and text != '–∫—Ç–æ —Ç—ã' and text != '—Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞' and text != '–ø–æ–≥–ª–∞–¥–∏—Ç—å' and text != '–Ω–∞–ø–æ–∏—Ç—å' and text != '—É–ª–æ–∂–∏—Ç—å —Å–ø–∞—Ç—å' and text != '–ø–æ–∫–æ—Ä–º–∏—Ç—å' and text != '–∏–≥—Ä—ã —Å –∫—É–±–∏–∫–æ–º' and text != '–ø–æ–∏–≥—Ä–∞—Ç—å' and text != '—Å–º–µ–Ω–∏—Ç—å –∏–º—è':
        namepet = text.capitalize()
        Bot.send_message(message.chat.id, f"–•–æ—Ä–æ—à–æ, —Ç–µ–ø–µ—Ä—å —è {namepet} !")
    elif text == '—Å–º–µ–Ω–∏—Ç—å –∏–º—è':
        namepet = ''
        Bot.send_message(message.chat.id, '–ù–∞–ø–∏—à–∏, –∫–∞–∫–æ–µ –∏–º—è —Ç–µ–±–µ —Ö–æ—Ç–µ–ª–æ—Å—å –±—ã –º–Ω–µ –¥–∞—Ç—å.')


    elif text=='–∫—Ç–æ —Ç—ã':

        Bot.send_message(message.chat.id, f'–Ø - {namepet} !')




    elif text == '—Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞':
        Bot.send_message(message.chat.id, f"–ò–º—è - {namepet}")
        Bot.send_message(message.chat.id, f"–û—Å—Ç–∞–≤—à–µ–µ—Å—è –≤—Ä–µ–º—è —Å–Ω–∞ {coudown}")
        Bot.send_message(message.chat.id, f"–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–≥–ª–∞–∂–∏–≤–∞–Ω–∏–π {happyn}")
        Bot.send_message(message.chat.id, f"–°—ã—Ç–æ—Å—Ç—å {eda}")
        Bot.send_message(message.chat.id, f"–ñ–∞–∂–¥–∞ {voda}")
        Bot.send_message(message.chat.id, f"–°—á–∞—Å—Ç—å–µ {happy}")
        Bot.send_message(message.chat.id, f"–ö–¥ –¥–æ –ø–∏—Ç—å—è {coudownvoda}")
        Bot.send_message(message.chat.id, f"–ö–¥ –¥–æ –ø—Ä–∏—ë–º–∞ –ø–∏—â–∏ {coudowneda}")

    elif text == '–∏–≥—Ä—ã —Å –∫—É–±–∏–∫–æ–º':
        if coudown == 0:
            if power > 15:
                power -= 15

                keyboard2 = telebot.types.InlineKeyboardMarkup(row_width=3)
                button7 = telebot.types.InlineKeyboardButton('1', callback_data='1')
                button2 = telebot.types.InlineKeyboardButton('2', callback_data='2')
                button3 = telebot.types.InlineKeyboardButton('3', callback_data='3')
                button4 = telebot.types.InlineKeyboardButton('4', callback_data='4')
                button5 = telebot.types.InlineKeyboardButton('5', callback_data='5')
                button6 = telebot.types.InlineKeyboardButton('6', callback_data='6')
                keyboard2.add(button7, button2, button3, button4, button5, button6)
                Bot.send_message(message.chat.id, '–í—ã–±–∏—Ä–∞–π!', reply_markup=keyboard2)
                @Bot.callback_query_handler(func=lambda call:call.data in ('1', '2', '3', '4', '5', '6'))
                def answer(call):

                    value = Bot.send_dice(call.message.chat.id, emoji='üé≤').dice.value
                    time.sleep(4)

                    if str(value)==call.data:
                        global happy
                        Bot.send_message(call.message.chat.id, f"–¢—ã –≤—ã–∏–≥—Ä–∞–ª! –¢–µ–∫—É—â–µ–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ {happy}")
                        happy += 15
                        happytick()

                    else:
                        Bot.send_message(call.message.chat.id, '–ù–µ –ø–æ–≤–µ–∑–ª–æ, –ø–æ–ø—Ä–æ–±—É–π –µ—â–µ —Ä–∞–∑!')
            else:
                Bot.send_message(message.chat.id, '–Ø —É—Å—Ç–∞–ª, —Ö–æ—Ç–µ–ª–æ—Å—å –±—ã –ø–æ—Å–ø–∞—Ç—å....')
        else:
            Bot.send_message(message.chat.id, '–ü–∏—Ç–æ–º–µ—Ü —Å–ø–∏—Ç –∏ –Ω–µ –º–æ–∂–µ—Ç –∏–≥—Ä–∞—Ç—å')

    elif text == '–ø–æ–∫–æ—Ä–º–∏—Ç—å':

        if coudown == 0:

            if coudowneda == 0:


                eda += 70
                coudowneda += 180 #—Ç—É—Ç –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å 1800
                Bot.send_message(message.chat.id, f"–ü–∏—Ç–æ–º–µ—Ü –ø–æ–∫–æ—Ä–º–ª–µ–Ω, —Å–ª–µ–¥—É—é—â–∏–π —Ä–∞–∑ —á–µ—Ä–µ–∑ 30 –º–∏–Ω—É—Ç. –¢–µ–∫—É—â–∞—è —Å—ã—Ç–æ—Å—Ç—å {eda}")
                edatick()
                coudownedatick()
            else:
                Bot.send_message(message.chat.id, "–ü–∏—Ç–æ–º–µ—Ü —Å—ã—Ç, –ø–æ–ø—Ä–æ–±—É–π –ø–æ—Ç–æ–º")
        else:

            Bot.send_message(message.chat.id, "–ü–∏—Ç–æ–º–µ—Ü —Å–ø–∏—Ç, –ø–æ–ø—Ä–æ–±—É–π –ø–æ–∑–∂–µ")



    elif text == '–Ω–∞–ø–æ–∏—Ç—å':

        if coudown == 0:

            if coudownvoda == 0:


                voda += 50
                coudownvoda += 180# —Ç—É—Ç —Ç–æ–∂–µ
                Bot.send_message(message.chat.id, f"–ü–∏—Ç–æ–º–µ—Ü –Ω–∞–ø–æ–µ–Ω, —Å–ª–µ–¥—É—é—â–∏–π —Ä–∞–∑ —á–µ—Ä–µ–∑ 30 –º–∏–Ω—É—Ç. –¢–µ–∫—É—â–∞—è –∂–∞–∂–¥–∞ {voda}")
                vodatick()
                coudownvodatick()

            else:
                Bot.send_message(message.chat.id, "–ü–∏—Ç–æ–º–µ—Ü —Å—ã—Ç, –ø–æ–ø—Ä–æ–±—É–π –ø–æ—Ç–æ–º")
        else:
            Bot.send_message(message.chat.id, "–ü–∏—Ç–æ–º–µ—Ü —Å–ø–∏—Ç, –ø–æ–ø—Ä–æ–±—É–π –ø–æ–∑–∂–µ")



    elif text == '—É–ª–æ–∂–∏—Ç—å —Å–ø–∞—Ç—å':

        if coudown == 0 and eda > 5 or power < 10 and eda > 5:



            power = 103 #–ø—Ä–∏–±–ª–∏–∑–∏—Ç–µ–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ, –ø–æ—Ç–æ–º –¥–æ–¥–µ–ª–∞—Ç—å
            coudown += 180 #—Ç—É—Ç –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å 18–∫
            eda -= 5
            Bot.send_message(message.chat.id, "–ü–∏—Ç–æ–º–µ—Ü —Å–ø–∏—Ç, –ø—Ä–æ—Å–Ω—ë—Ç—Å—è —á–µ—Ä–µ–∑ 5 —á–∞—Å–æ–≤")
            coudowntick()
            powertick()
        else:
            Bot.send_message(message.chat.id, "–ü–∏—Ç–æ–º–µ—Ü –ª–∏–±–æ —É–∂–µ —Å–ø–∏—Ç, –ª–∏–±–æ –≥–æ–ª–æ–¥–µ–Ω –∏ –Ω–µ –º–æ–∂–µ—Ç –∑–∞—Å–Ω—É—Ç—å")



    elif text == '–ø–æ–≥–ª–∞–¥–∏—Ç—å':

        if coudown == 0:

            if power > 0:

                happy += 10
                happytick()
                happyn += 1
                Bot.send_message(message.chat.id, f"–í—ã –ø–æ–≥–ª–∞–¥–∏–ª–∏ –ø–∏—Ç–æ–º—Ü–∞. –ü–∏—Ç–æ–º–µ—Ü –¥–æ–≤–æ–ª–µ–Ω. –í–µ–ª–∏–∫–∏–π –ö–∏—Ç–∞–π—Å–∫–∏–π –ø–∞—Ä—Ç–∏—è —Ç–æ–∂–µ. –¢–µ–∫—É—â–µ–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ {happy}")
            
            else:
                Bot.send_message(message.chat.id, "–ü–∏—Ç–æ–º–µ—Ü –∏–∑–º–æ—Ç–∞–Ω.")
        else:
            Bot.send_message(message.chat.id, f'–ü–∏—Ç–æ–º–µ—Ü —Å–ø–∏—Ç, –ø–æ–ø—Ä–æ–±—É–π —á–µ—Ä–µ–∑ {coudown // 60} –º–∏–Ω—É—Ç')


    elif text == '–ø–æ–∏–≥—Ä–∞—Ç—å':

        if coudown == 0:

            if power > 0:

                happy += 30
                happytick()
                Bot.send_message(message.chat.id, f"–í—ã –ø–æ–∏–≥—Ä–∞–ª–∏—Å—å —Å –ø–∏—Ç–æ–º—Ü–µ–º, —Ç–µ–∫—É—â–µ–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ {happy}")
            else:
                Bot.send_message(message.chat.id, "–ü–∏—Ç–æ–º–µ—Ü –∏–∑–º–æ—Ç–∞–Ω.")
        else:
            Bot.send_message(message.chat.id, f'–ü–∏—Ç–æ–º–µ—Ü —Å–ø–∏—Ç, –ø–æ–ø—Ä–æ–±—É–π —á–µ—Ä–µ–∑ {coudown // 60} –º–∏–Ω—É—Ç')







if __name__ == '__main__':
    print('–ë–æ—Ç –∑–∞–ø—É—â–µ–Ω...')
    Bot.infinity_polling() # –ü–æ–∑–≤–æ–ª—è–µ—Ç –±–æ—Ç—É —Ä–∞–±–æ—Ç–∞—Ç—å –ø–æ—Å—Ç–æ—è–Ω–Ω–æ [4]
